{"content":"<h1 id=\"跨域资源共享\">跨域资源共享</h1>\n<p>是解决浏览器同源限制的一种方式，同源： 协议、域名、端口号   </p>\n<h2 id=\"简单请求\">简单请求</h2>\n<p>只要同时满足下列两个情况，就是简单请求<br><strong>1.</strong> 包含下列三种请求方法之一</p>\n<blockquote>\n<p>Head<br>Post<br>Get   </p>\n</blockquote>\n<p><strong>2.</strong> HTTP头部信息不超过以下几种字段</p>\n<blockquote>\n<p>Accept<br>Accept-Language<br>Last-Event-ID<br>Content-Language<br>Content-Type: 只限于aplicaton/x-www-formdata-urlencoded、aplication/formdata、text/plain</p>\n</blockquote>\n<p>简单请求是为了兼容表单，历史上表单是可以一直发起跨域请求，所以form可以发的，ajax也可以直接发  </p>\n<h3 id=\"预请求options\">预请求options</h3>\n<pre><code class=\"hljs http\"><span class=\"hljs-keyword\">OPTIONS</span> <span class=\"hljs-string\">/cors</span> <span class=\"hljs-meta\">HTTP/1.1</span>\n<span class=\"hljs-attribute\">Origin</span><span class=\"hljs-punctuation\">: </span>http://api.bob.com\n<span class=\"hljs-attribute\">Access-Control-Request-Method</span><span class=\"hljs-punctuation\">: </span>PUT\n<span class=\"hljs-attribute\">Access-Control-Request-Headers</span><span class=\"hljs-punctuation\">: </span>X-Custom-Header\n<span class=\"hljs-attribute\">Host</span><span class=\"hljs-punctuation\">: </span>api.alice.com\n<span class=\"hljs-attribute\">Accept-Language</span><span class=\"hljs-punctuation\">: </span>en-US\n<span class=\"hljs-attribute\">Connection</span><span class=\"hljs-punctuation\">: </span>keep-alive\n<span class=\"hljs-attribute\">User-Agent</span><span class=\"hljs-punctuation\">: </span>Mozilla/5.0...\n</code></pre>\n<h3 id=\"cors发送流程：\">cors发送流程：</h3>\n<pre><code class=\"hljs mermaid\">graph TB\n1(发起Ajax请求) --&gt; 2(浏览器)\n2 --&gt; 3{是否简单请求}\n3 --&gt; |是|4[浏览器在请求头添加Origin]\n4 --&gt; 5[服务器]\n5 --&gt; 6{根据origin判断是否允许访问}\n6 --&gt; |是|7[添加Access-Control-Allow-Origin]\n7 --&gt; 2\n6 --&gt; |否|8[正常返回]\n8 --&gt; 2\n3 --&gt; |否|9[浏览器发起简单请求options]\n9 --&gt; 5\n</code></pre>\n","fileName":"CORS"}